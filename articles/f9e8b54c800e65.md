---
title: "ã€Railsã€‘ãƒ¢ãƒ‡ãƒ«å†…ã«è¬ã®å˜èªãŒã‚ã£ãŸï¼Ÿ"
emoji: "ğŸ§–â€â™‚ï¸"
type: "tech"
topics:
  - "rails"
  - "ruby"
  - "activerecord"
  - "self"
published: true
published_at: "2023-02-03 20:26"
---

Railsã‚’ç”¨ã„ãŸå®Ÿå‹™ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«å‡ºä¼šã„ã¾ã—ãŸï¼ˆå®Ÿéš›ã‚ˆã‚Šã¯ã‹ãªã‚Šçœç•¥ãƒ»ä¿®æ­£ã—ã¦ã„ã¾ã™ï¼‰ã€‚

```ruby:models/human.rb
class Human < ActiveRecord::Base
 #ç”·ã‹ã©ã†ã‹ã‚’åˆ¤åˆ¥ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ manãŒ1ãªã‚‰trueã‚’è¿”ã™ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰
 def man?
  man == 1
 end
end
```
man?ã¨ã„ã†ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã§ç”·ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ã‚ã‹ã‚Šã¾ã—ãŸã€‚ãŸã ã“ã®ä¸­ã«ã‚ã‚‹manãŒã©ã“ã‹ã‚‰æ¥ã‚‹ã®ã‹ãŒåˆã‚ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã©ã“ã‹ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã‹ãªã¨ã‚‚æ€ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«å†…ã‚’æ¤œç´¢ã—ã¾ã—ãŸãŒã€ã©ã“ã«ã‚‚manã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ä»Šå›ã®è¨˜äº‹ã§ã¯ã“ã®manãŒã©ã“ã‹ã‚‰æ¥ãŸã‹ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚Railsã®ãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã‚ˆãã‚ã‹ã‚‰ãªã„å˜èªã«å‡ºä¼šã£ã¦ã—ã¾ã£ãŸæ™‚ã«ä½¿ãˆã‚‹çŸ¥è­˜ã®1ã¤ã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ï¼

## çµè«–
å…ˆã«çµè«–ã‚’è¿°ã¹ãŸã„ã¨æ€ã„ã¾ã™ã€‚Humanãƒ¢ãƒ‡ãƒ«ã«å¯¾å¿œã—ãŸDBï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«manã¨ã„ã†ã‚«ãƒ©ãƒ ãŒã‚ã‚Šã€å…ˆã»ã©ã®manã®å€¤ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®manã‚«ãƒ©ãƒ ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å–ã‚Šå‡ºã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã—ãŸã€‚

ã§ã¯ã€ãªãœãã†ãªã‚‹ã®ã‹ã‚’è§£èª¬ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

## self
ã¾ãšã€å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã¯å®Ÿã¯selfã¨ã„ã†ã‚‚ã®ãŒçœç•¥ã•ã‚Œã¦ãŠã‚Šã€å®Ÿéš›ã¯ä»¥ä¸‹ã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
```ruby
class Human < ActiveRecord::Base
 def man?
  self.man == 1
 end
end
```
ã“ã®selfã¯ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè¡Œä¸»ä½“ã‚’æŒ‡ã™ãã†ã§ã™ã€‚å®Ÿè¡Œä¸»ä½“ã¨ã„ã†ã¨å°‘ã—é›£ã—ã„æ°—ãŒã—ã¾ã™ãŒã€çµå±€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã®ã¯èª°ï¼Ÿã¨ã„ã†ã“ã¨ã§ã™ã€‚ãªã®ã§ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®selfã®å®Ÿè¡Œä¸»ä½“ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ï¼

selfã«ã¤ã„ã¦ã¯ä»¥ä¸‹è¨˜äº‹ãŒéå¸¸ã«å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚
å‚è€ƒï¼š[selfã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—](https://haruguchi-yuma.hatenablog.com/entry/2022/02/11/103118)

ã“ã®selfã¯çœç•¥ãŒå¯èƒ½ãªã®ã§ã€selfã®å­˜åœ¨ã‚’çŸ¥ã‚‰ãšã«ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã‚‰ä½•ã“ã‚Œï¼Ÿã¨ãªã‚Šã¾ã—ãŸã€‚

ãŸã ã—ä»¥ä¸‹ãƒªãƒ³ã‚¯ã®ã‚ˆã†ã«selfã‚’çœç•¥ã§ããªã„å ´åˆã‚‚ã‚ã‚‹ã¿ãŸã„ã£ã¦ã“ã¨ã¯è¦šãˆã¦ãŠã„ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚
å‚è€ƒï¼š[rubyã§selfã‚’çœç•¥ã§ãã‚‹æ™‚ã€ã§ããªã„æ™‚](https://qiita.com/akira-hamada/items/4132d2fda7e420073ab7)

Railsã§humanã¨ã„ã†ãƒ¢ãƒ‡ãƒ«ã«å¯¾å¿œã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã«manã¨ã„ã†ã‚«ãƒ©ãƒ ãŒã‚ã‚‹æ™‚ã€å–å¾—ã—ã¦ããŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®manãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å–å¾—ã—ãŸã„æ™‚ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè¡Œã§ãã‚‹ã“ã¨ã¯ã”å­˜çŸ¥ã§ã—ã‚‡ã†ã€‚
```ruby
@human = Human.find(1) #DBã‹ã‚‰å–å¾—ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ä»£å…¥
#â†’å°æ —æ—¬ã®ãƒ¬ã‚³ãƒ¼ãƒ‰
@human.man #ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®manã‚«ãƒ©ãƒ ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼
#â†’ï¼‘
```
![](https://storage.googleapis.com/zenn-user-upload/7b4e7507548f-20230129.png =500x)
ä»Šå›ã¯selfãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ãªã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã€çµå±€ä¸Šè¨˜ã¨åŒã˜ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§è¨€ã„ãŸã„ã“ã¨ã¯å¤§ä½“ä¼ãˆçµ‚ã‚ã£ãŸã®ã§ã™ãŒã€å‚è€ƒã¨ã—ã¦ä»Šå›ã®man?ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ã‚ã‚Œã‚‹æ™‚ã®ä¾‹ã¨ã—ã¦ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚
ä»®ã«ä¸Šã®è¡¨ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã ã¨ã™ã‚‹ã¨å°æ —æ—¬ã®æ™‚ã¯ç§ã¯ç”·ã§ã™ã¨å‡ºåŠ›ã•ã‚Œã€æ©‹æœ¬ç’°å¥ˆã®æ™‚ã¯ä½•ã‚‚å‡ºåŠ›ã•ã‚Œã¾ã›ã‚“ã¨ã„ã£ãŸæ„Ÿã˜ã§ã™ã€‚
```ruby
@humans = Human.all
@humans.each |human| do
 if human.man?
  puts "ç§ã¯manã§ã™"
 end
end
```

## ä½™è«‡
ãã‚‚ãã‚‚ãªãœhuman.manï¼ˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹.ã‚«ãƒ©ãƒ åï¼‰ã®ã‚ˆã†ãªæ›¸ãæ–¹ã§ã€å¯¾è±¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚«ãƒ©ãƒ ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å–å¾—ã§ãã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã¤ã¾ã‚Šã€ãªãœã‚«ãƒ©ãƒ ã‚’ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ˆã†ã«ä½¿ãˆã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã¨ã„ã†ç–‘å•ãŒæ¹§ãã¾ã—ãŸã€‚
ã“ã‚Œã«é–¢ã—ã¦ã¯ä»¥ä¸‹ãƒªãƒ³ã‚¯ãŒå‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚
å‚è€ƒï¼š[ã€Railsã€‘ã‚«ãƒ©ãƒ ãŒãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ˆã†ã«ä½¿ãˆã‚‹ã®ã¯ãªãœï¼Ÿ](https://coffee-engineer4.com/2021/05/19/%E3%80%90rails%E3%80%91%E3%82%AB%E3%83%A9%E3%83%A0%E3%81%8C%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B%E3%81%AE%E3%81%AF%E3%81%AA%E3%81%9C/)

è¦ã¯Active Recordã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹.ã‚«ãƒ©ãƒ åã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ˆã†ãªä½¿ã„æ–¹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã„ã†ã“ã¨ã§ã—ãŸï¼ã¤ã¾ã‚ŠActive Recordã®ã‚¯ãƒ©ã‚¹ã®ä¸­ã«ã“ã®ã‚ˆã†ãªæŒ™å‹•ã«ãªã‚‹è¨­å®šãŒæ›¸ã„ã¦ã‚ã‚‹ã ã‚ã†ã£ã¦ã“ã¨ã ã‘èªè­˜ã—ã¦ç§ã¯æº€è¶³ã—ã¾ã—ãŸç¬‘